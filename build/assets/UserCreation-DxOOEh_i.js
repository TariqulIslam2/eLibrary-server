import{r as t,j as e,L as T}from"./index-BnTmYUkP.js";import{s as c}from"./DefaultLayout-BXqfuJ5f.js";import{a as d,b as m}from"./api-wfLvVcRq.js";import{u as A}from"./index.esm-CJb1F2Ko.js";import{F as be,o as je,i as Ne}from"./paginationfunction-D0VE8UAN.js";import{s as Ee}from"./searchFunction-BiSHdcbM.js";import{a as o}from"./cil-lock-locked-Df1Z1tUn.js";import{M as Se}from"./index-B5xwxV_0.js";import{C as P,a as g}from"./CRow-DtjUj6WL.js";import{S as ge}from"./index-ClsgFobk.js";import{C as v}from"./CFormSelect-D3I97q4w.js";import{C as R}from"./CModalFooter-D8yuYI43.js";import{C as O,a as F,b as $,c as Y}from"./CModalTitle-DvCGmg8K.js";import{B as V}from"./button-CXLSpfiv.js";import{R as ve}from"./EditOutlined-BtGnOwYh.js";import{I as Ce,_ as ye}from"./AntdIcon-ZEkvb8A9.js";import"./index.esm-DG5RHfQW.js";import"./compact-item-BqMqF4CM.js";import"./CFormControlWrapper-9QT-VOct.js";var we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},Ie=function(C,r){return t.createElement(Ce,ye({},C,{ref:r,icon:we}))},Le=t.forwardRef(Ie);const Ge=()=>{const[h,C]=t.useState([]),[r,B]=t.useState([]),[M,q]=t.useState(""),[z,u]=t.useState(!1),[i,f]=t.useState({}),[H,x]=t.useState(!1),[W,p]=t.useState(!1),{register:b,reset:K,formState:{errors:n},handleSubmit:X}=A(),{register:y,reset:G,setValue:k,formState:{errors:Ue},handleSubmit:J}=A(),{register:D,reset:Q,formState:{errors:Ae},handleSubmit:Z}=A(),[j,w]=t.useState([]),ee=(s,l)=>{s?j.includes(l)||w([...j,l]):w(j.filter(a=>a!==l))},se=s=>{c({title:"Are you sure?",buttons:!0}).then(l=>{if(l){const a=_.split("&");s.EMPLOYEE_ID=parseInt(a[0]),s.PHONE_NUMBER=a[1],s.NAME=a[2],s.ROLES=j,d.post(`${m}/usercreation`,s).then(S=>{c({title:"Thank You !",text:"Successfully Insert",icon:"success",button:"Ok"}),K(),E(!1),w([]),u(!0)}).catch(S=>{alert(S.message)})}else c("Your imaginary file is safe!")})},[le,ae]=t.useState([]),[_,te]=t.useState(),oe=(s,l)=>((l==null?void 0:l.label)??"").toLowerCase().includes(s.toLowerCase()),re=s=>{te(s)};t.useEffect(()=>{d.get(`${m}/setting/employee`).then(s=>{ae(s.data.data)}).catch(s=>{alert(s.message)})},[]),t.useEffect(()=>{d.get(`${m}/admistration/roleaccess`).then(s=>{B(s.data.data)}).catch(s=>{alert(s.message)})},[]),t.useEffect(()=>{d.get(`${m}/usercreation`).then(s=>{const l=s.data.data,a=Ee(l,M,"EMP_NAME","EMAIL","MOBILE","USER_STATUS","USER_TYPE");C(a),u(!1)}).catch(s=>{alert(s.message)})},[M,z]),t.useEffect(()=>{i&&Object.keys(i).forEach(s=>{k(s,i[s])})},[i,k]);const[N,I]=t.useState(),ie=(s,l)=>{I(s?a=>[...a,l]:a=>a.filter(S=>S!==l))},ne=[{title:"Name",className:"dark_bg ",dataIndex:"EMP_NAME"},{title:"Login Email",className:"dark_bg ",dataIndex:"EMAIL"},{title:"Phone Number",className:"dark_bg ",dataIndex:"MOBILE"},{title:"User Status",className:"dark_bg ",dataIndex:"USER_STATUS"},{title:"User Type",className:"dark_bg ",dataIndex:"USER_TYPE"},{title:"Action",className:"dark_bg ",render:(s,l)=>e.jsxs("div",{className:"text-center",children:[e.jsx(V,{style:{backgroundColor:"#3C8DBC",color:"#fff"},onClick:()=>{var a;x(!0),f(l),I(((a=l.ROLES)==null?void 0:a.split(",").map(Number))||[])},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Access Product",shape:"circle",icon:e.jsx(ve,{})}),e.jsx(V,{style:{backgroundColor:"#FA4032",color:"#fff"},onClick:()=>{p(!0),f(l)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Access Product",shape:"circle",icon:e.jsx(Le,{})})]})}],[ce,E]=t.useState(!1),de=()=>{E(!0)},me=s=>{c({title:"Are you sure?",buttons:!0}).then(l=>{l?(s.ROLES=N,s.EMAIL=s.EMAIL,s.USER_STATUS=s.USER_STATUS,s.USER_TYPE=s.USER_TYPE,d.put(`${m}/usercreation`,s).then(a=>{a&&(c({title:"Thank You !",text:"Successfully Update",icon:"success",button:"Ok"}),u(!0),x(!1),f({}),G())}).catch(a=>{console.log(a)})):c("Your imaginary file is safe!")})},[L,he]=t.useState(!1),[U,xe]=t.useState(!1),pe=()=>{he(!L)},ue=()=>{xe(!U)},fe=s=>{s.EMAIL=i.EMAIL,s.EMPLOYEE_ID=i.EMPLOYEE_ID,d.put(`${m}/changePasswordByAdmin`,s).then(l=>{l&&(c({title:"Thank You !",text:"Successfully Update",icon:"success",button:"Ok"}),u(!0),p(!1),f({}),Q())}).catch(l=>{console.log(l)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-end",children:[e.jsx("div",{className:"me-2",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("i",{className:"fa fa-search position-absolute",style:{left:"10px",top:"50%",transform:"translateY(-50%)",color:"#999"}}),e.jsx("input",{onChange:s=>{q(s.target.value)},className:"form-control w-100 shadow ps-4 ms-1",type:"text",placeholder:"Search Here",style:{paddingLeft:"35px"}})]})}),e.jsx("div",{className:"text-end",children:e.jsx(o,{style:{backgroundColor:"#3C8DBC",color:"#fff"},onClick:de,children:"+ Add User"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"row ",children:e.jsx("div",{className:"col-md-12 ",children:e.jsx("div",{className:"table-responsive",children:e.jsx(be,{className:"table-striped",pagination:{total:h===void 0?0:h.length,showTotal:(s,l)=>`Showing ${l[0]} to ${l[1]} of ${s} entries`,showSizeChanger:!0,onShowSizeChange:je,itemRender:Ne},style:{overflowX:"auto"},columns:ne,bordered:!0,dataSource:h===void 0?[]:h,rowKey:s=>s.EMPLOYEE_ID,onChange:console.log("change")})})})})}),e.jsx(Se,{title:"User Creation",width:1e3,footer:!0,open:ce,onCancel:()=>E(!1),children:e.jsxs("form",{onSubmit:X(se),children:[e.jsxs(P,{children:[e.jsxs(g,{xs:12,lg:6,children:[e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput14",className:"form-label fw-bold small",children:["Employee Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(ge,{showSearch:!0,placeholder:"Select a Employee",optionFilterProp:"children",className:"w-100",onChange:re,filterOption:oe,options:le.map(s=>({value:`${s.EMPLOYEE_ID}&${s.MOBILE}&${s.EMP_NAME}`,label:s.EMP_NAME}))}),e.jsx("input",{tabIndex:-1,autoComplete:"off",style:{opacity:0,height:0},value:_,required:!0})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput14",className:"form-label fw-bold small",children:["Email ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",className:`form-control ${n.EMAIL?"is-invalid":""}`,id:"exampleFormControlInput14",placeholder:"Email",...b("EMAIL",{required:!0})}),e.jsx("div",{className:"invalid-feedback",children:n.EMAIL&&"Please enter a valid email address."})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput14",className:"form-label fw-bold small",children:["Password ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"password",className:`form-control ${n.PASSWORD?"is-invalid":""}`,id:"exampleFormControlInput15",placeholder:"Password",...b("PASSWORD",{required:!0})}),e.jsx("div",{className:"invalid-feedback",children:n.PASSWORD&&"Please enter your password."})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput16",className:"form-label fw-bold small",children:["User Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(v,{className:`mb-3 ${n.USER_STATUS?"is-invalid":""}`,...b("USER_STATUS",{required:!0}),"aria-label":"Large select example",children:[e.jsx("option",{value:"",children:"Open this select menu"}),e.jsx("option",{value:"VALID",children:"VALID"}),e.jsx("option",{value:"INVALID",children:"INVALID"})]}),e.jsx("div",{className:"invalid-feedback",children:n.USER_STATUS&&"Please select a user status."})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput17",className:"form-label fw-bold small",children:["User Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(v,{className:`mb-3 ${n.USER_TYPE?"is-invalid":""}`,...b("USER_TYPE",{required:!0}),"aria-label":"Large select example",children:[e.jsx("option",{value:"",children:"Open this select menu"}),e.jsx("option",{value:"ADMIN",children:"ADMIN"}),e.jsx("option",{value:"USER",children:"USER"})]}),e.jsx("div",{className:"invalid-feedback",children:n.USER_TYPE&&"Please select a user type."})]})]}),e.jsxs(g,{xs:12,lg:6,children:[e.jsxs("div",{className:"d-flex justify-content-between mb-4",children:[e.jsx("h4",{children:"Roles"}),e.jsx("div",{children:e.jsx(T,{to:"/admistration/createnewrole",children:e.jsx(o,{style:{backgroundColor:"#3C8DBC",color:"#fff"},children:"+ Create New Role"})})})]}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:r==null?void 0:r.map((s,l)=>e.jsx("div",{className:"col-sm-4 mb-2",children:e.jsxs("div",{className:"d-flex",children:[" ",e.jsx("div",{style:{paddingTop:"2px"},children:e.jsx("input",{type:"checkbox",style:{width:"20px",height:"20px"},onChange:a=>ee(a.target.checked,s.ROLE_ID)})}),e.jsx("p",{className:"ms-2",children:s.ROLE_NAME})]})},l))})})]})]}),e.jsx("div",{className:"submit-section mt-5",children:e.jsxs(R,{className:"justify-content-center",style:{borderTop:"none"},children:[e.jsx(o,{color:"secondary",className:"me-2",onClick:()=>E(!1),children:"Close"}),e.jsx(o,{style:{backgroundColor:"#3C8DBC",color:"#fff"},type:"submit",children:"Add"})]})})]})}),i&&e.jsxs(O,{visible:H,size:"lg",onClose:()=>x(!1),"aria-labelledby":"LiveDemoExampleLabel",children:[e.jsx(F,{onClose:()=>x(!1),children:e.jsx($,{id:"LiveDemoExampleLabel",style:{fontFamily:"Segoe UI"},children:"Update user Info"})}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:J(me),children:[e.jsx(P,{children:e.jsxs(g,{xs:12,children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label fw-bold small",children:"Login Email"}),e.jsx("input",{type:"email",className:"form-control",id:"exampleFormControlInput14",...y("EMAIL")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label fw-bold small",children:"User Status"}),e.jsxs(v,{className:"mb-3",...y("USER_STATUS"),"aria-label":"Large select example",children:[e.jsx("option",{children:"Open this select menu"}),e.jsx("option",{value:"VALID",children:"VALID"}),e.jsx("option",{value:"INVALID",children:"INVALID"})]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label fw-bold small",children:"User Type"}),e.jsxs(v,{className:"mb-3",...y("USER_TYPE"),"aria-label":"Large select example",children:[e.jsx("option",{children:"Open this select menu"}),e.jsx("option",{value:"ADMIN",children:"ADMIN"}),e.jsx("option",{value:"USER",children:"USER"})]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-4",children:[e.jsx("h4",{children:"Roles"}),e.jsx("div",{children:e.jsx(T,{to:"/admistration/createnewrole",children:e.jsx(o,{style:{backgroundColor:"#3C8DBC",color:"#fff"},children:"+ Create New Role"})})})]}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:r==null?void 0:r.map((s,l)=>e.jsx("div",{className:"col-sm-4 mb-2",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{style:{paddingTop:"2px"},children:e.jsx("input",{type:"checkbox",style:{width:"20px",height:"20px"},checked:(N==null?void 0:N.includes(s.ROLE_ID))||!1,onChange:a=>ie(a.target.checked,s.ROLE_ID)})}),e.jsx("p",{className:"ms-2",children:s.ROLE_NAME})]})},`${s.ROLE_ID}-${s.ROLE_NAME}`))})})]})}),e.jsx("div",{className:"submit-section",children:e.jsxs(R,{className:"justify-content-center",style:{borderTop:"none"},children:[e.jsx(o,{color:"secondary",onClick:()=>x(!1),children:"Close"}),e.jsx(o,{style:{backgroundColor:"#3C8DBC",color:"#fff"},type:"submit",children:"Update"})]})})]})})]}),i&&e.jsxs(O,{visible:W,size:"lg",onClose:()=>p(!1),"aria-labelledby":"LiveDemoExampleLabel",children:[e.jsx(F,{onClose:()=>p(!1),children:e.jsx($,{id:"LiveDemoExampleLabel",style:{fontFamily:"Segoe UI"},children:"Update User Password"})}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:Z(fe),children:[e.jsx(P,{children:e.jsxs(g,{xs:12,children:[e.jsxs("div",{className:"mb-1 position-relative",children:[e.jsxs("label",{className:"form-label small",children:["New Password ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:L?"text":"password",className:"form-control",placeholder:"New Password",...D("newpassword",{required:!0})}),e.jsx("i",{className:`fa ${L?"fa-eye-slash":"fa-eye"}`,onClick:pe,style:{position:"absolute",top:"75%",right:"10px",transform:"translateY(-50%)",cursor:"pointer"}})]}),e.jsxs("div",{className:"mb-1 position-relative",children:[e.jsxs("label",{className:"form-label small",children:["Confirm Password ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:U?"text":"password",className:"form-control",placeholder:"Confirm Password",...D("confirmpassword",{required:!0})}),e.jsx("i",{className:`fa ${U?"fa-eye-slash":"fa-eye"}`,onClick:ue,style:{position:"absolute",top:"75%",right:"10px",transform:"translateY(-50%)",cursor:"pointer"}})]})]})}),e.jsx("div",{className:"submit-section",children:e.jsxs(R,{className:"justify-content-center",style:{borderTop:"none"},children:[e.jsx(o,{color:"secondary",onClick:()=>p(!1),children:"Close"}),e.jsx(o,{style:{backgroundColor:"#3C8DBC",color:"#fff"},type:"submit",children:"Update Password"})]})})]})})]})]})};export{Ge as default};
