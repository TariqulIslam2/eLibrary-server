import{r as t,A as ae,j as e}from"./index-BnTmYUkP.js";import{s as n}from"./DefaultLayout-BXqfuJ5f.js";import{a as h,b as i}from"./api-wfLvVcRq.js";import{u as S}from"./index.esm-CJb1F2Ko.js";import{F as oe,o as re,i as ne}from"./paginationfunction-D0VE8UAN.js";import{s as ie}from"./searchFunction-BiSHdcbM.js";import{a as p}from"./cil-lock-locked-Df1Z1tUn.js";import{C as v,a as E,b as R,c as A}from"./CModalTitle-DvCGmg8K.js";import{C as U,a as g}from"./CRow-DtjUj6WL.js";import{S as k}from"./index-ClsgFobk.js";import{C as w}from"./CModalFooter-D8yuYI43.js";import{B as ce}from"./button-CXLSpfiv.js";import{R as me}from"./EditOutlined-BtGnOwYh.js";import"./index.esm-DG5RHfQW.js";import"./AntdIcon-ZEkvb8A9.js";import"./compact-item-BqMqF4CM.js";const Ae=()=>{const[x,T]=t.useState([]),[r,D]=t.useState({}),[O,u]=t.useState(!1),[j,_]=t.useState(""),[y,c]=t.useState(!1),[N,m]=t.useState(!1),[B,P]=t.useState(),[L,M]=t.useState(),f=ae(),{register:H,reset:$,formState:{errors:de},handleSubmit:Y}=S(),{register:o,reset:q,setValue:C,formState:{errors:he},handleSubmit:K}=S(),V=s=>{const l=s.target.files[0];console.log(l),P(l),M(URL.createObjectURL(l))};t.useEffect(()=>{h.get(`${i}/librarysetting/author`).then(s=>{console.log(s);const l=s.data.data,a=ie(l,j,"AUTHOR_NAME","EMAIL","PHONE_NUMBER","COUNTRY");T(a),u(!1)}).catch(s=>{alert(s.message)})},[j,O]);const z=s=>{n({title:"Are you sure?",buttons:!0}).then(l=>{if(l){console.log(s),s.AUTHOR_ID=r.AUTHOR_ID,console.log(s);const a=new FormData;a.append("image",B);for(const d in s)Object.prototype.hasOwnProperty.call(s,d)&&a.append(d,s[d]);h({method:"put",url:`${i}/librarysetting/author`,data:a}).then(d=>{d&&(n({title:"Thank You !",text:"Successfully Update",icon:"success",button:"Ok"}),u(!0),q(),m(!1))})}else n("Your imaginary file is safe!")})},W=s=>{F?(s.USER_ID=f==null?void 0:f.employee_id,s.BOOK_ID=parseInt(F),n({title:"Are you sure?",buttons:!0}).then(l=>{l?(console.log(s),h({method:"post",url:`${i}/addbookrequest`,data:s}).then(a=>{a&&(n({title:"Thank You!",text:"Successfully Inserted",icon:"success",button:"Ok"}),u(!0),$(),c(!1))}).catch(a=>console.error("Error posting data:",a))):n("Your imaginary file is safe!")})):alert("Book Name Required")},G=[{title:" ID",className:"dark_bg text-center",dataIndex:"REQUEST_ID",width:"5%"},{title:"Book Name",className:"dark_bg ",render:(s,l)=>e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-sm-4",children:[" ",e.jsx("img",{src:l!=null&&l.PROFILE_PICTURE?`${i}/static/public/image/${l==null?void 0:l.PROFILE_PICTURE}`:"/placeholder.jpg",style:{width:"30%",height:"auto"},alt:""})]}),e.jsx("div",{className:"col-sm-8",children:l.AUTHOR_NAME})]}),width:"20%"},{title:"Request Date",className:"dark_bg ",dataIndex:"REQUEST_DATE",width:"10%"},{title:"Status",className:"dark_bg ",dataIndex:"STATUS",width:"10%"},{title:"Remark",className:"dark_bg ",dataIndex:"REMARKS",width:"10%"},{title:"Action",width:"5%",className:"dark_bg text-center",render:(s,l)=>e.jsx("div",{className:"text-center",children:e.jsx(ce,{style:{backgroundColor:"rgb(61, 54, 78)",color:"#fff"},onClick:()=>{m(!N),D(l)},title:"Access Product",shape:"circle",icon:e.jsx(me,{})})})}];t.useEffect(()=>{r&&Object.keys(r).forEach(s=>{C(s,r[s])})},[r,C]);const I=(s,l)=>((l==null?void 0:l.label)??"").toLowerCase().includes(s.toLowerCase()),[Q,X]=t.useState([]),[b,J]=t.useState(),Z=s=>{J(s)};t.useEffect(()=>{h.get(`${i}/librarysetting/category`).then(s=>{console.log(s),X(s.data.data)}).catch(s=>{alert(s.message)})},[]);const[ee,se]=t.useState([]),[F,le]=t.useState(),te=s=>{le(s)};return t.useEffect(()=>{const s=b?`?categoryId=${b}`:"";h.get(`${i}/addbookinfoData${s}`).then(l=>{console.log(l),se(l.data.data)}).catch(l=>{alert(l.message)})},[b]),e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-end",children:[e.jsx("div",{className:"me-2",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("i",{className:"fa fa-search position-absolute",style:{left:"10px",top:"50%",transform:"translateY(-50%)",color:"#999"}}),e.jsx("input",{onChange:s=>{_(s.target.value)},className:"form-control w-100 shadow ps-4 ms-1",type:"text",placeholder:"Search Here",style:{paddingLeft:"35px"}})]})}),e.jsx("div",{className:"text-end",children:e.jsx(p,{style:{backgroundColor:"rgb(61, 54, 78)",color:"#fff"},onClick:()=>c(!y),children:"+ Request a Book"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"row ",children:e.jsx("div",{className:"col-md-12 ",children:e.jsx("div",{className:"table-responsive",children:e.jsx("div",{className:"customDepartmentTable",children:e.jsx(oe,{className:"table-striped",pagination:{total:x===void 0?0:x.length,showTotal:(s,l)=>`Showing ${l[0]} to ${l[1]} of ${s} entries`,showSizeChanger:!0,onShowSizeChange:re,itemRender:ne},style:{overflowX:"auto"},columns:G,bordered:!0,dataSource:x===void 0?[]:x,rowKey:s=>s.AUTHOR_ID,onChange:console.log("change")})})})})})}),e.jsxs(v,{visible:y,size:"lg",onClose:()=>c(!1),"aria-labelledby":"LiveDemoExampleLabel",children:[e.jsx(E,{onClose:()=>c(!1),children:e.jsx(R,{id:"LiveDemoExampleLabel",style:{fontFamily:"Segoe UI"},children:"Request a Book"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:Y(W),children:[e.jsx(U,{children:e.jsxs(g,{xs:12,children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput21",className:"form-label small",children:"Category"}),e.jsx(k,{showSearch:!0,placeholder:"Select a Category",optionFilterProp:"children",className:"w-100 ",onChange:Z,filterOption:I,options:Q.map(s=>({value:s.CATEGORY_ID,label:s.CATEGORY_NAME})),getPopupContainer:s=>s.parentNode})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput21",className:"form-label small",children:["Book ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(k,{showSearch:!0,placeholder:"Select a Book",optionFilterProp:"children",className:"w-100 ",onChange:te,filterOption:I,options:ee.map(s=>({value:s.BOOK_ID,label:`${s.TITLE}-${s.AUTHOR_NAME}`})),getPopupContainer:s=>s.parentNode})]}),e.jsxs("div",{class:"mb-3",children:[e.jsx("label",{for:"exampleFormControlTextarea1",class:"form-label",children:"Remark"}),e.jsx("textarea",{class:"form-control",id:"exampleFormControlTextarea1",placeholder:"Enter Remark",...H("REMARKS"),rows:"3"})]})]})}),e.jsx("div",{className:"submit-section",children:e.jsxs(w,{className:"justify-content-center",style:{borderTop:"none"},children:[e.jsx(p,{color:"secondary",onClick:()=>c(!1),children:"Close"}),e.jsx(p,{style:{backgroundColor:"rgb(61, 54, 78)",color:"#fff"},type:"submit",children:"Add"})]})})]})})]}),r&&e.jsxs(v,{visible:N,size:"lg",onClose:()=>m(!1),"aria-labelledby":"LiveDemoExampleLabel",children:[e.jsx(E,{onClose:()=>m(!1),children:e.jsx(R,{id:"LiveDemoExampleLabel",style:{fontFamily:"Segoe UI"},children:"Update Publisher Information"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:K(z),children:[e.jsxs(U,{children:[e.jsxs(g,{xs:6,children:[e.jsx("div",{style:{borderRadius:"11px",fontFamily:"Segoe UI"},children:e.jsx("img",{src:L||"/placeholder.jpg",width:"150px",height:"150px",alt:"Uploaded Preview",style:{borderRadius:"50%"}})}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label  small",children:"Image"}),e.jsx("input",{type:"file",name:"image",className:"form-control",id:"exampleFormControlInput14",onChange:s=>V(s)})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label small",style:{fontFamily:"Segoe UI"},children:"Author Name"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput14",placeholder:"Author Name",...o("AUTHOR_NAME")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label small",style:{fontFamily:"Segoe UI"},children:"Email"}),e.jsx("input",{type:"email",className:"form-control",id:"exampleFormControlInput14",placeholder:"Contact Email",...o("EMAIL")})]})," ",e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label small",style:{fontFamily:"Segoe UI"},children:"Phone Number"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput14",placeholder:"Phone Number",...o("PHONE_NUMBER")})]})]}),e.jsxs(g,{xs:6,children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label small",style:{fontFamily:"Segoe UI"},children:"Date Of Birth"}),e.jsx("input",{type:"date",className:"form-control",id:"exampleFormControlInput14",...o("DATE_OF_BIRTH")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label small",style:{fontFamily:"Segoe UI"},children:"Website"}),e.jsx("input",{type:"text",className:"form-control ",id:"exampleFormControlInput14",placeholder:"Website Address",...o("WEBSITE")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label small",style:{fontFamily:"Segoe UI"},children:"Country Name"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput14",placeholder:"Country Name",...o("COUNTRY")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label small",style:{fontFamily:"Segoe UI"},children:"Award"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput14",placeholder:"Award",...o("AWARDS")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label small",style:{fontFamily:"Segoe UI"},children:"Biography"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput14",placeholder:"Biography",...o("BIOGRAPHY")})]})]})]}),e.jsx("div",{className:"submit-section",children:e.jsxs(w,{className:"justify-content-center",style:{borderTop:"none"},children:[e.jsx(p,{color:"secondary",onClick:()=>m(!1),children:"Close"}),e.jsx(p,{style:{backgroundColor:"rgb(61, 54, 78)",color:"#fff"},type:"submit",children:"Update"})]})})]})})]})]})};export{Ae as default};
