import{k as $,r as l,j as e}from"./index-BnTmYUkP.js";import{a as r,b as o}from"./api-wfLvVcRq.js";import{u as k}from"./index.esm-CJb1F2Ko.js";import{C as d,a as c}from"./CRow-DtjUj6WL.js";import{S as p}from"./index-ClsgFobk.js";import{a as G}from"./cil-lock-locked-Df1Z1tUn.js";import"./AntdIcon-ZEkvb8A9.js";import"./compact-item-BqMqF4CM.js";const ee=()=>{const{register:t,reset:h,formState:{errors:m},handleSubmit:x}=k(),u=$(),[b,N]=l.useState(),[g,j]=l.useState(),[Y,f]=l.useState([]);l.useState();const[M,I]=l.useState([]);l.useState();const[q,C]=l.useState([]);l.useState();const i=(a,s)=>((s==null?void 0:s.label)??"").toLowerCase().includes(a.toLowerCase()),F=a=>{const s=a.target.files[0];N(s),j(URL.createObjectURL(s))};l.useEffect(()=>{r.get(`${o}/setting/designation`).then(a=>{f(a.data.data)}).catch(a=>{alert(a.message)})},[]),l.useEffect(()=>{r.get(`${o}/admistration/companyinfo`).then(a=>{C(a.data.data)}).catch(a=>{alert(a.message)})},[]),l.useEffect(()=>{r.get(`${o}/setting/department`).then(a=>{I(a.data.data)}).catch(a=>{alert(a.message)})},[]);const[E,S]=l.useState([]),[y,P]=l.useState(),v=a=>{P(a)};l.useEffect(()=>{r.get(`${o}/librarysetting/category`).then(a=>{console.log(a),S(a.data.data)}).catch(a=>{alert(a.message)})},[]);const[A,T]=l.useState([]),[w,R]=l.useState(),L=a=>{R(a)};l.useEffect(()=>{r.get(`${o}/librarysetting/author`).then(a=>{console.log(a),T(a.data.data)}).catch(a=>{alert(a.message)})},[]);const[O,D]=l.useState([]),[U,B]=l.useState(),_=a=>{B(a)};l.useEffect(()=>{r.get(`${o}/librarysetting/publisher`).then(a=>{console.log(a),D(a.data.data)}).catch(a=>{alert(a.message)})},[]);const H=a=>{a.CATEGORY_ID=parseInt(y),a.AUTHOR_ID=parseInt(w),a.PUBLISHER_ID=parseInt(U);const s=new FormData;s.append("image",b);for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.append(n,a[n]);r.post(`${o}/addbookinfo`,s).then(n=>{u(-1)}).catch(n=>{alert(n.message)}),h()};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:x(H),className:"bg-white p-5 my-3",children:[e.jsxs(d,{children:[e.jsxs(c,{xs:4,className:"",children:[e.jsx("div",{style:{borderRadius:"11px",textAlign:"center",marginBottom:"10px",fontFamily:"Segoe UI"},children:e.jsx("img",{src:g||"/placeHolder.png",width:"150px",height:"auto",alt:"Uploaded Preview"})}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput14",className:"form-label  small",children:["Image ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",name:"image",className:`form-control ${m.filePath?"is-invalid":""}`,...t("filePath",{required:"Image File is required"}),id:"exampleFormControlInput14",onChange:a=>F(a)}),m.filePath&&e.jsx("div",{className:"invalid-feedback",children:m.filePath.message})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput22",className:"form-label small",children:["Title ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${m.TITLE?"is-invalid":""}`,id:"exampleFormControlInput22",placeholder:"Enter Title",...t("TITLE",{required:!0})}),e.jsx("div",{className:"invalid-feedback",children:m.TITLE&&"Please enter an Title."})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput21",className:"form-label small",children:["Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(p,{showSearch:!0,placeholder:"Select a Category",optionFilterProp:"children",className:"w-100 ",onChange:v,filterOption:i,options:E.map(a=>({value:a.CATEGORY_ID,label:a.CATEGORY_NAME}))})]})]}),e.jsx(c,{xs:8,children:e.jsxs(d,{children:[e.jsxs(c,{xs:6,children:[e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput23",className:"form-label small",children:["Author Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(p,{showSearch:!0,placeholder:"Select a Author",optionFilterProp:"children",className:"w-100 ",onChange:L,filterOption:i,options:A.map(a=>({value:a.AUTHOR_ID,label:a.AUTHOR_NAME}))})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("label",{htmlFor:"exampleFormControlInput24",className:"form-label small",children:["Publisher Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(p,{showSearch:!0,placeholder:"Select a Publisher",optionFilterProp:"children",className:"w-100 ",onChange:_,filterOption:i,options:O.map(a=>({value:a.PUBLISHER_ID,label:a.PUBLISHER_NAME}))})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput25",className:"form-label  small",children:"ISBN"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput25",placeholder:"Enter ISBN",...t("ISBN")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput26",className:"form-label  small",children:"Edition"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput26",placeholder:"Enter Edition",...t("EDITION")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput27",className:"form-label  small",children:"Language"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput27",placeholder:"Enter Language",...t("LANGUAGE")})]})," ",e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label  small",children:"Page"}),e.jsx("input",{type:"number",className:"form-control",id:"exampleFormControlInput27",placeholder:"Enter total Page No",...t("PAGES")})]})," "]}),e.jsxs(c,{xs:6,children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput28",className:"form-label  small",children:"Published Year"}),e.jsx("input",{type:"number",className:"form-control",id:"exampleFormControlInput28",placeholder:"Published Year",...t("PUBLISHED_YEAR")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput29",className:"form-label  small",children:"Copies"}),e.jsx("input",{type:"number",className:"form-control",id:"exampleFormControlInput29",placeholder:"Enter Copies",...t("COPIES")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput30",className:"form-label  small",children:"Location"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput30",placeholder:"Enter Location",...t("LOCATION")})]})," ",e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput31",className:"form-label  small",children:"Format"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput31",placeholder:"Enter Format",...t("FORMAT")})]})," ",e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput32",className:"form-label  small",children:"Price"}),e.jsx("input",{type:"number",className:"form-control",id:"exampleFormControlInput32",placeholder:"Enter Price",...t("PRICE")})]})," ",e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{htmlFor:"exampleFormControlInput14",className:"form-label  small",children:"Description"}),e.jsx("input",{type:"text",className:"form-control",id:"exampleFormControlInput14",placeholder:"Enter Description",...t("DESCRIPTION")})]})," "]})]})})]}),e.jsx("div",{className:"submit-section d-flex justify-content-center",children:e.jsx("div",{className:" w-25",style:{borderTop:"none"},children:e.jsx(G,{style:{backgroundColor:"rgb(61, 54, 78)",color:"#fff"},className:"ms-2 my-1 py-2 w-100",type:"submit",children:"Save"})})})]})})};export{ee as default};
